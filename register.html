<!DOCTYPE html>
<html lang="en"> 
<head>
	<meta charset="utf-8">
	<title>Register</title>
	<script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
</head> 

<script>
		var ref = new Firebase("https://project-fork-and-potato.firebaseio.com");
		var usersRef = ref.child("users");
		
		function $(id) {
			return document.getElementById(id);
		}
		
		//store account info on database
		function saveData(acc, pw, mail){
			usersRef.push({

				id: acc,
				pw: pw,
				email: mail

			});
		}
		
		function checkInfo(acc1, pw2) {
			var query = usersRef.orderByChild("id").equalTo(acc1);
			
				query.on("child_added", function(snapshot) {
				
				ref.child("users/" + snapshot.key() + "/id").on("value", function(sn2) {
				  document.write("Your ID is:  " + sn2.val() + "<br>"); 				  			  
				});
				ref.child("users/" + snapshot.key() + "/pw").on("value", function(sn) {
				  document.write("Your Password is:  " + sn.val() + "<br>");				  			  
				});
				ref.child("users/" + snapshot.key() + "/email").on("value", function(sn) {
				  document.write("Your Email is:  " + sn.val());				  			  
				});

			});
			alert("Logged in");
			
		}
		
		
		
		//extract values from id 
		function register(account, passWord, email) {
			var acc = $(account).value;
			var pw = $(passWord).value;
			var mail = $(email).value;
			saveData(acc, pw, mail);

		}
		
		function verify(account, passWord) {
			var acc1 = $(account).value;
			var pw2 = $(passWord).value;
			checkInfo(acc1, pw2);
	
		}
		
		
</script>

<body>

<!-- register-->
<form method="post" action="" onsubmit= "register('account', 'passWord', 'email');">
  ID:<br>
  <input type="text" id="account" name="account" value="Mickey">
  <br>
  Password:<br>
  <input type="text" id="passWord" name="passWord" value="Mouse">
  <br>
  Email:<br>
  <input type="text" id="email" name="email" value="yolo@123.com">
  <br><br>
  <input type="submit" value="Register">
</form> 
<br><br><br><br>

<!-- log in validation -->
<form method="post" action="" onsubmit= "verify('account', 'passWord');">
  ID:<br>
  <input type="text" id="account" name="account" value="Mickey">
  <br>
  Password:<br>
  <input type="text" id="passWord" name="passWord" value="Mouse">
  <br><br>
  <input type="submit" value="Log In">
</form> 


</body>
</html>