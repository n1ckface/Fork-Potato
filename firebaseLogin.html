<!DOCTYPE html>
<html lang="en"> 
<head>
	<meta charset="utf-8">
	<title>Authentication Page</title>
	
<script src="https://www.gstatic.com/firebasejs/3.9.0/firebase.js"></script>


<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyB8EekPhs6qYLXCxCi0oyypG3f25MlBFFY",
    authDomain: "project-fork-and-potato.firebaseapp.com",
    databaseURL: "https://project-fork-and-potato.firebaseio.com",
    projectId: "project-fork-and-potato",
    storageBucket: "project-fork-and-potato.appspot.com",
    messagingSenderId: "119574546255"
  };
  
  firebase.initializeApp(config);

</script>
</head> 

<script>

		

		

		var database = firebase.database();
		var ref = database.ref('users');

		firebase.auth().onAuthStateChanged(function(user) {
		  if (user) {
			// User is signed in.
			alert("Welcome to Fork&Potato");
		  } else {
			alert("You're not logged in!");
		  }
		});

		function signIn(acc, pw) {
		
			 var email = document.getElementById('account').value;
			 var password = document.getElementById('passWord').value;
			 var checker = false;

			// Sign in with email and password
			firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
			
				checker = true;
			  //error case
			  var errorCode = error.code;
			  var errorMessage = error.message;
			  
			  if (errorCode === 'auth/wrong-password') {
				alert('Wrong password.');
			  } else {
				alert(errorMessage);
			  }
			  console.log(error);
	  
			 if(!checker){
			console.log("yay");
			}
			});
			

		}
		
		function signUp(acc, pw) {
			 var email = document.getElementById('account').value;
			 var password = document.getElementById('passWord').value;
			  

				// signup with email and password
			  firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
				
				// error case
				var errorCode = error.code;
				var errorMessage = error.message;
				
				if (errorCode == 'auth/weak-password') {
				  alert('The password is too weak.');
				} else {
				  alert(errorMessage);
				}
				console.log(error);
				
			  });
			   
		}
		
		function signOut() {
			firebase.auth().signOut().then(function() {
			  // Sign-out successful.
			}).catch(function(error) {
			  // An error happened.
			});
		}
</script>

<body>





<!-- log in validation -->
<form >
  E-mail:<br>
  <input type="text" id="account" name="account" value="email">
  <br>
  Password:<br>
  <input type="text" id="passWord" name="passWord" value="password">
  <br><br>
  <input type="button" value="Log In" onclick= "signIn('account', 'passWord');">
  <input type="button" value="Register" onclick= "signUp('account', 'passWord');">
  <input type="button" value="Log out" onclick= "signOut();">
</form> 

</body>
</html>